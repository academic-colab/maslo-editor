<html>
<head>
	<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.14.custom.css" rel="stylesheet" /> 
	<link type="text/css" href="css/screen.css" rel="stylesheet" />
	<link type="text/css" href="css/jquery.cleditor.css" rel="stylesheet" />
	<title>MASLO - Edit Quiz</title>
</head>
<body>
<h1><a href="index.html">My Content Packs</a> >
	<a class="back" href="#"></a> >
	<span class="current"></span></h1>
<div class="extra"><a href="#">Help</a></div>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th class="big">Title</th>
		<th>Remove</th>
	</tr>
</thead>
<tbody class="proj">
</tbody>
</table>
<div class="action">
	<a class="alt" href="">+ Add Question</a>
	<button type="button" id="back">Back</button>
	<div class="clear"></div>
</div>

<form id="dialog-question" style="display: none" title="Edit Question">
	<fieldset>
		<label for="question">Question</label>
		<textarea rows="2" cols="50" name="question"></textarea>
	</fieldset>
	<input type="button" value="+ Add another answer"
		onclick="addAnswer($('#dialog-question fieldset'))"/>
</form>

<script type="text/javascript" src="AIRAliases.js"></script>
<script type="text/javascript" src="js/jquery-1.6.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.14.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.selectBox.min.js"></script>
<script type="text/javascript" src="js/mpthrize.js"></script>
<script type="text/javascript" src="js/param.js"></script>
<script type="text/javascript" src="js/load.js"></script>
<script type="text/javascript" src="js/types.js"></script>
<script type="text/javascript" src="js/manifest.js"></script>
<script type="text/javascript">

// -------------------------- SET UP PAGE -------------------------
$(document).ready(function() {
	var gPageParams = queryParameters(document.location.search);
	// the parameter "name" is formatted as "project/quiz"
	var names = gPageParams.name.toString().split(air.File.separator);
	var gProj = names[0];
	var gName = names[1];
	$('a.back').attr('href', 'proj.html?name=' + gProj);
	$('a.back').text(gProj.toString());
	$('span.current').text(gName.toString());
	$('#back').click(function() {
		window.location = 'proj.html?name=' + gProj;
	});

	var	gManifest = manifest(gPageParams.name);
	for(var m in gManifest) {
		m = gManifest[m];
		var tr = $('<tr />');
		tr.append($('<td class="icon"><img src="' +
			iconForType('question') + '"/></td>'));
		tr.append($('<td><a href="#">' + m.question + '</a></td>'));
		tr.append($('<td class="icon"><img class="remove" src="icons/remove.png" alt="Remove Item" /></td>'));
		$('tbody.proj').append(tr);
	}
	linkManifestOrderToTable(gManifest, $('tbody.proj'), gPageParams.name);

	addAnswer($('#dialog-question fieldset'));
	addAnswer($('#dialog-question fieldset'));
	addAnswer($('#dialog-question fieldset'));
	$('#dialog-question').dialog({
		autoOpen: true,
		modal: true,
		width: 540,
		position: 'top',
		buttons: {
			"Save": function() { }
		}
	});

});

function addAnswer(q) {
	var a = $('<div class="answer" />')

	a.append($('<img class="remove" src="icons/remove.png" alt="Remove Item" />'));

	a.append($('<label for="answer">Answer</label>'))
	a.append($('<input type"text" name="answer" />'));

	a.append($('<input type="checkbox" name="correct" />'));
	a.append($('<label for="correct">Correct</label>'));

	a.append($('<input type="button" value="+ Feedback" />'));
	q.append(a);
}
</script>
</body>
</html>

